local event = {}

local Event = CPI.object()

function newEvent(name)
  local self = CPI.object(Event)
  self.name = name
  event[name] = {}
  
  return self
end

function Event:call(...)
  callEvent(self.name, ...)
end

function callEvent(name, ...)
  for i,v in ipairs(event[name]) do
    v(...)
  end
end

function pull(name, f)
  table.insert(event[name], f)
end